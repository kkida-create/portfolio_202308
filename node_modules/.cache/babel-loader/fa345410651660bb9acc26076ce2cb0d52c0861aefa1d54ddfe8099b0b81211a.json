{"ast":null,"code":"import _objectSpread from \"/Users/kitakanta/Desktop/\\u5C31\\u6D3B/\\u30DB\\u309A\\u30FC\\u30C8\\u30D5\\u30A9\\u30EA\\u30AA_20230819/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.find-index.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport { defineStore } from 'pinia';\nimport { useProductStore } from './product.js';\nexport var useCartStore = defineStore({\n  id: 'cart',\n  state: function state() {\n    return {\n      cart: []\n    };\n  },\n  getters: {\n    totalAmount: function totalAmount() {\n      return this.cart.reduce(function (acc, curr) {\n        return acc + curr.price * curr.quantity;\n      }, 0);\n    },\n    quantityInCart: function quantityInCart(state) {\n      return function (productId) {\n        var productInCart = state.cart.find(function (product) {\n          return product.product_id === productId;\n        });\n        return productInCart ? productInCart.quantity : 0;\n      };\n    },\n    totalQuantity: function totalQuantity() {\n      return this.cart.reduce(function (acc, product) {\n        return acc + product.selectedQuantity;\n      }, 0);\n    }\n  },\n  actions: {\n    addToCart: function addToCart(productId) {\n      var quantity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var productStore = useProductStore();\n      var product = productStore.getProductById(productId);\n      if (!product) {\n        return;\n      }\n      var useSpecialPrice = ['0034', '0042', '0049', '0052'].includes(productId);\n      var selectedProduct = useSpecialPrice ? _objectSpread(_objectSpread({}, product), {}, {\n        price: product.special_price\n      }) : product;\n      var productInCart = this.cart.find(function (item) {\n        return item.product_id === productId;\n      });\n      var selectedQuantity = productInCart ? productInCart.selectedQuantity : 0;\n      var updatedQuantity = selectedQuantity + Number(quantity);\n      if (useSpecialPrice) {\n        selectedProduct.price = product.special_price;\n      } else {\n        selectedProduct.price = product.price;\n      }\n      if (updatedQuantity > product.stock) {\n        console.error('Cannot add more items than available in stock.');\n        return;\n      }\n      if (productInCart) {\n        if (updatedQuantity <= product.stock) {\n          productInCart.selectedQuantity = updatedQuantity;\n        } else {\n          console.error('Cannot add more items than available in stock.');\n          return;\n        }\n      } else {\n        if (quantity <= product.stock) {\n          this.cart.push(_objectSpread(_objectSpread({}, selectedProduct), {}, {\n            quantity: Number(quantity),\n            selectedQuantity: Number(quantity)\n          }));\n        } else {\n          console.error('Cannot add more items than available in stock.');\n          return;\n        }\n      }\n    },\n    decreaseQuantity: function decreaseQuantity(productId) {\n      var productInCart = this.cart.find(function (item) {\n        return item.product_id === productId;\n      });\n      if (productInCart && productInCart.selectedQuantity > 0) {\n        productInCart.selectedQuantity--;\n      }\n    },\n    increaseQuantity: function increaseQuantity(productId) {\n      var productStore = useProductStore();\n      var product = productStore.getProductById(productId);\n      var productInCart = this.cart.find(function (item) {\n        return item.product_id === productId;\n      });\n      if (productInCart && productInCart.selectedQuantity < product.stock) {\n        productInCart.selectedQuantity++;\n      }\n    },\n    setQuantity: function setQuantity(productId, quantity) {\n      var productInCart = this.cart.find(function (item) {\n        return item.product_id === productId;\n      });\n      if (productInCart) {\n        productInCart.selectedQuantity = quantity;\n      }\n    },\n    updateSelectedQuantity: function updateSelectedQuantity(productId, selectedQuantity) {\n      var productInCart = this.cart.find(function (item) {\n        return item.product_id === productId;\n      });\n      if (productInCart) {\n        productInCart.selectedQuantity = selectedQuantity;\n      }\n    },\n    removeProduct: function removeProduct(productId) {\n      var index = this.cart.findIndex(function (item) {\n        return item.product_id === productId;\n      });\n      if (index !== -1) {\n        this.cart.splice(index, 1);\n      }\n    },\n    clearCart: function clearCart() {\n      this.cart = [];\n    }\n  }\n});","map":{"version":3,"names":["defineStore","useProductStore","useCartStore","id","state","cart","getters","totalAmount","reduce","acc","curr","price","quantity","quantityInCart","productId","productInCart","find","product","product_id","totalQuantity","selectedQuantity","actions","addToCart","arguments","length","undefined","productStore","getProductById","useSpecialPrice","includes","selectedProduct","_objectSpread","special_price","item","updatedQuantity","Number","stock","console","error","push","decreaseQuantity","increaseQuantity","setQuantity","updateSelectedQuantity","removeProduct","index","findIndex","splice","clearCart"],"sources":["/Users/kitakanta/Desktop/就活/ポートフォリオ_20230819/src/store/cart.js"],"sourcesContent":["import { defineStore } from 'pinia'\nimport { useProductStore } from './product.js'\n\nexport const useCartStore = defineStore({\n  id: 'cart',\n  state: () => ({\n    cart: [],\n  }),\n  getters: {\n    totalAmount() {\n      return this.cart.reduce((acc, curr) => acc + curr.price * curr.quantity, 0)\n    },\n    quantityInCart: (state) => (productId) => {\n      const productInCart = state.cart.find((product) => product.product_id === productId)\n      return productInCart ? productInCart.quantity : 0\n    },\n    totalQuantity() {\n      return this.cart.reduce((acc, product) => acc + product.selectedQuantity, 0)\n    },\n  },\n  actions: {\n    addToCart(productId, quantity = 1) {\n      const productStore = useProductStore()\n      const product = productStore.getProductById(productId)\n      if (!product) {\n        return\n      }\n      const useSpecialPrice = ['0034', '0042', '0049', '0052'].includes(productId)\n      const selectedProduct = useSpecialPrice ? { ...product, price: product.special_price } : product\n      const productInCart = this.cart.find((item) => item.product_id === productId)\n\n      const selectedQuantity = productInCart ? productInCart.selectedQuantity : 0\n      const updatedQuantity = selectedQuantity + Number(quantity)\n      if (useSpecialPrice) {\n        selectedProduct.price = product.special_price\n      } else {\n        selectedProduct.price = product.price\n      }\n      if (updatedQuantity > product.stock) {\n        console.error('Cannot add more items than available in stock.')\n        return\n      }\n      if (productInCart) {\n        if (updatedQuantity <= product.stock) {\n          productInCart.selectedQuantity = updatedQuantity\n        } else {\n          console.error('Cannot add more items than available in stock.')\n          return\n        }\n      } else {\n        if (quantity <= product.stock) {\n          this.cart.push({ ...selectedProduct, quantity: Number(quantity), selectedQuantity: Number(quantity) })\n        } else {\n          console.error('Cannot add more items than available in stock.')\n          return\n        }\n      }\n    },\n    decreaseQuantity(productId) {\n      const productInCart = this.cart.find((item) => item.product_id === productId)\n      if (productInCart && productInCart.selectedQuantity > 0) {\n        productInCart.selectedQuantity--\n      }\n    },\n    increaseQuantity(productId) {\n      const productStore = useProductStore()\n      const product = productStore.getProductById(productId)\n      const productInCart = this.cart.find((item) => item.product_id === productId)\n      if (productInCart && productInCart.selectedQuantity < product.stock) {\n        productInCart.selectedQuantity++\n      }\n    },\n    setQuantity(productId, quantity) {\n      const productInCart = this.cart.find((item) => item.product_id === productId)\n      if (productInCart) {\n        productInCart.selectedQuantity = quantity\n      }\n    },\n    updateSelectedQuantity(productId, selectedQuantity) {\n      const productInCart = this.cart.find((item) => item.product_id === productId)\n      if (productInCart) {\n        productInCart.selectedQuantity = selectedQuantity\n      }\n    },\n    removeProduct(productId) {\n      const index = this.cart.findIndex((item) => item.product_id === productId)\n      if (index !== -1) {\n        this.cart.splice(index, 1)\n      }\n    },\n    clearCart() {\n      this.cart = []\n    },\n  },\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}