{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '../assets/product_sample.jpg';\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-4b31075d\"), n = n(), _popScopeId(), n;\n};\nvar _hoisted_1 = {\n  \"class\": \"cart-container\"\n};\nvar _hoisted_2 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"h1\", {\n    \"class\": \"cart-title\"\n  }, \"カート一覧\", -1 /* HOISTED */);\n});\nvar _hoisted_3 = {\n  \"class\": \"contents-container\"\n};\nvar _hoisted_4 = {\n  \"class\": \"left-container\"\n};\nvar _hoisted_5 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"figure\", {\n    \"class\": \"product-photo-container\"\n  }, [/*#__PURE__*/_createElementVNode(\"img\", {\n    \"class\": \"product-photo\",\n    src: _imports_0,\n    alt: \"商品\"\n  })], -1 /* HOISTED */);\n});\nvar _hoisted_6 = {\n  \"class\": \"product-detail\"\n};\nvar _hoisted_7 = {\n  \"class\": \"product-name\"\n};\nvar _hoisted_8 = {\n  \"class\": \"product-price\"\n};\nvar _hoisted_9 = {\n  \"class\": \"select-button-container\"\n};\nvar _hoisted_10 = {\n  \"class\": \"product-amount-container\"\n};\nvar _hoisted_11 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"p\", {\n    \"class\": \"amount\"\n  }, \"個数：\", -1 /* HOISTED */);\n});\nvar _hoisted_12 = [\"value\", \"onChange\"];\nvar _hoisted_13 = [\"value\"];\nvar _hoisted_14 = {\n  \"class\": \"size-select-container\"\n};\nvar _hoisted_15 = {\n  \"class\": \"size\"\n};\nvar _hoisted_16 = [\"onClick\"];\nvar _hoisted_17 = {\n  \"class\": \"right-container\"\n};\nvar _hoisted_18 = {\n  \"class\": \"total-card\"\n};\nvar _hoisted_19 = {\n  \"class\": \"total-quantity\"\n};\nvar _hoisted_20 = {\n  \"class\": \"total-price\"\n};\nvar _hoisted_21 = {\n  key: 0,\n  \"class\": \"error-message\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"main\", null, [_createElementVNode(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.cart, function (product) {\n    return _openBlock(), _createElementBlock(\"div\", {\n      \"class\": \"cart-card\",\n      key: product.product_id\n    }, [_hoisted_5, _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, _toDisplayString(product.product_name), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_8, \" ¥ \" + _toDisplayString($setup.formatNumber($setup.getProductPrice(product))) + \"(税込) \", 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_hoisted_11, _createElementVNode(\"select\", {\n      \"class\": \"product-amount\",\n      size: \"1\",\n      value: $setup.getQuantityInCart(product.product_id),\n      onChange: function onChange($event) {\n        return $setup.setQuantity(product.product_id, $event.target.value);\n      }\n    }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.availableQuantity(product), function (num) {\n      return _openBlock(), _createElementBlock(\"option\", {\n        key: num,\n        value: num\n      }, _toDisplayString(num), 9 /* TEXT, PROPS */, _hoisted_13);\n    }), 128 /* KEYED_FRAGMENT */))], 40 /* PROPS, HYDRATE_EVENTS */, _hoisted_12)]), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"p\", _hoisted_15, \"サイズ：\" + _toDisplayString(product.size), 1 /* TEXT */)])]), _createElementVNode(\"button\", {\n      \"class\": \"delete-button\",\n      onClick: function onClick($event) {\n        return $setup.removeProduct(product.product_id);\n      }\n    }, \" 削除 \", 8 /* PROPS */, _hoisted_16)])]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_17, [_createElementVNode(\"div\", _hoisted_18, [_createElementVNode(\"div\", _hoisted_19, \"合計個数 \" + _toDisplayString($setup.totalQuantity) + \" 個\", 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_20, \" 合計金額 ¥\" + _toDisplayString($setup.formatNumber($setup.totalPrice)) + \"(税込) \", 1 /* TEXT */), _createElementVNode(\"button\", {\n    \"class\": \"buying-procedure-button\",\n    onClick: _cache[0] || (_cache[0] = function () {\n      return $setup.checkAndNavigate && $setup.checkAndNavigate.apply($setup, arguments);\n    })\n  }, \" 購入手続きへ \"), $setup.errorMessage ? (_openBlock(), _createElementBlock(\"p\", _hoisted_21, _toDisplayString($setup.errorMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])])])])]);\n}","map":{"version":3,"names":["_imports_0","_createElementVNode","src","alt","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_Fragment","_renderList","$setup","cart","product","key","product_id","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","product_name","_hoisted_8","formatNumber","getProductPrice","_hoisted_9","_hoisted_10","_hoisted_11","size","value","getQuantityInCart","onChange","$event","setQuantity","target","availableQuantity","num","_hoisted_13","_hoisted_14","_hoisted_15","onClick","removeProduct","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","totalQuantity","_hoisted_20","totalPrice","_cache","checkAndNavigate","apply","arguments","errorMessage","_hoisted_21"],"sources":["/Users/kitakanta/Desktop/就活/ポートフォリオ_20230819/src/views/CartListView.vue"],"sourcesContent":["<template>\n  <main>\n    <div class=\"cart-container\">\n      <h1 class=\"cart-title\">カート一覧</h1>\n      <div class=\"contents-container\">\n        <div class=\"left-container\">\n          <div\n            class=\"cart-card\"\n            v-for=\"product in cart\"\n            :key=\"product.product_id\"\n          >\n            <figure class=\"product-photo-container\">\n              <img\n                class=\"product-photo\"\n                src=\"../assets/product_sample.jpg\"\n                alt=\"商品\"\n              />\n            </figure>\n            <div class=\"product-detail\">\n              <div class=\"product-name\">{{ product.product_name }}</div>\n              <div class=\"product-price\">\n                ¥ {{ formatNumber(getProductPrice(product)) }}(税込)\n              </div>\n              <div class=\"select-button-container\">\n                <div class=\"product-amount-container\">\n                  <p class=\"amount\">個数：</p>\n                  <select\n                    class=\"product-amount\"\n                    size=\"1\"\n                    :value=\"getQuantityInCart(product.product_id)\"\n                    @change=\"\n                      setQuantity(product.product_id, $event.target.value)\n                    \"\n                  >\n                    <option\n                      v-for=\"num in availableQuantity(product)\"\n                      :key=\"num\"\n                      :value=\"num\"\n                    >\n                      {{ num }}\n                    </option>\n                  </select>\n                </div>\n                <div class=\"size-select-container\">\n                  <p class=\"size\">サイズ：{{ product.size }}</p>\n                </div>\n              </div>\n              <button\n                class=\"delete-button\"\n                @click=\"removeProduct(product.product_id)\"\n              >\n                削除\n              </button>\n            </div>\n          </div>\n        </div>\n        <div class=\"right-container\">\n          <div class=\"total-card\">\n            <div class=\"total-quantity\">合計個数 {{ totalQuantity }} 個</div>\n            <div class=\"total-price\">\n              合計金額 ¥{{ formatNumber(totalPrice) }}(税込)\n            </div>\n            <button class=\"buying-procedure-button\" @click=\"checkAndNavigate\">\n              購入手続きへ\n            </button>\n            <p v-if=\"errorMessage\" class=\"error-message\">{{ errorMessage }}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </main>\n</template>\n\n<script>\nimport { computed, ref } from \"vue\";\nimport { useCartStore } from \"@/store/cart.js\";\nimport { useRouter } from \"vue-router\";\nimport { useProductStore } from \"@/store/product.js\";\nimport { onMounted } from \"vue\";\n\nexport default {\n  setup() {\n    onMounted(() => {\n      window.scrollTo(0, 0);\n    });\n    const cartStore = useCartStore();\n    const router = useRouter();\n    const totalQuantity = computed(() => {\n      return cartStore.cart.reduce(\n        (sum, product) => sum + Number(product.selectedQuantity),\n        0\n      );\n    });\n    const totalPrice = computed(() =>\n      cartStore.cart.reduce(\n        (sum, product) => sum + product.price * product.selectedQuantity,\n        0\n      )\n    );\n    const errorMessage = ref(\"\");\n\n    function removeProduct(productId) {\n      cartStore.removeProduct(productId);\n    }\n\n    function setQuantity(productId, quantity) {\n      const productStore = useProductStore();\n      const product = productStore.getProductById(productId);\n\n      const updatedQuantity = Number(quantity);\n      if (updatedQuantity <= product.stock) {\n        cartStore.setQuantity(productId, updatedQuantity);\n      }\n    }\n    function getProductPrice(product) {\n      return product.price || product.special_price || 0;\n    }\n    function getQuantityInCart(productId) {\n      const productInCart = cartStore.cart.find(\n        (item) => item.product_id === productId\n      );\n      return productInCart ? productInCart.selectedQuantity : 0;\n    }\n\n    function formatNumber(value) {\n      return Number(value).toLocaleString();\n    }\n\n    function checkAndNavigate() {\n      if (totalQuantity.value === 0) {\n        errorMessage.value = \"商品がカートに入っていません\";\n      } else {\n        errorMessage.value = \"\";\n        router.push(\"/cart-payment\");\n      }\n    }\n\n    function availableQuantity(product) {\n      return Array.from({ length: product.stock }, (_, i) => i + 1);\n    }\n    return {\n      cart: cartStore.cart,\n      totalQuantity,\n      totalPrice,\n      removeProduct,\n      setQuantity,\n      getProductPrice,\n      formatNumber,\n      checkAndNavigate,\n      errorMessage,\n      getQuantityInCart,\n      availableQuantity,\n    };\n  },\n};\n</script>\n\n<style scoped>\n.cart-container {\n  padding-top: 120px;\n  min-width: 950px;\n  background-color: #eeeeee;\n}\n.cart-container > * {\n  background-color: inherit;\n}\n.contents-container {\n  display: flex;\n  justify-content: space-between;\n  transition: width 0.3s ease;\n  margin-top: 30px;\n}\n.left-container {\n  width: 500px;\n  padding-left: 20px;\n}\n.cart-title {\n  font-size: 40px;\n}\n.cart-card {\n  display: flex;\n  border: 1px solid black;\n  height: 250px;\n  width: 100%;\n  padding-bottom: 20px;\n  background-color: white;\n}\n.cart-card:not(:first-of-type) {\n  margin-top: 30px;\n}\n.cart-card:last-of-type {\n  margin-bottom: 30px;\n}\n.product-photo-container {\n  width: 220px;\n  height: 220px;\n  display: block;\n  margin: 15px;\n}\n.product-photo {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n}\n.product-detail {\n  display: flex;\n  flex-direction: column;\n  padding-top: 20px;\n  align-items: center;\n  justify-content: space-between;\n  overflow: auto;\n}\n.product-name {\n  font-size: 24px;\n}\n.product-price {\n  font-size: 24px;\n  margin-top: 10px;\n}\n.select-button-container {\n  display: flex;\n}\n.product-amount-container {\n  display: flex;\n  border-radius: 4px;\n  border: 1.5px solid black;\n  align-items: center;\n}\n.product-amount {\n  border: none;\n}\n.amount {\n  margin: 0 0;\n  padding: 0 3px;\n}\n.size-select-container {\n  display: flex;\n  border-radius: 4px;\n  border: 1.5px solid black;\n  margin-left: 30px;\n  padding: 0 3px;\n}\n.size-select {\n  border: none;\n}\n.size {\n  margin: 0 0;\n}\n.delete-button {\n  background: none;\n  color: inherit;\n  border: none;\n  padding: 0;\n  font: inherit;\n  cursor: pointer;\n  outline: inherit;\n}\n.delete-button:hover {\n  color: aqua;\n  text-decoration: underline;\n}\n.right-container {\n  width: 300px;\n  padding-right: 20px;\n  text-align: center;\n}\n.total-card {\n  width: 100%;\n  height: 270px;\n  font-size: 24px;\n  border: 1px solid black;\n  background-color: white;\n}\n.total-quantity {\n  padding-top: 40px;\n}\n.total-price {\n  margin-top: 20px;\n}\n.buying-procedure-button {\n  margin-top: 50px;\n}\n.buying-procedure-button:hover {\n  background-color: darkgray;\n  box-shadow: 0 0 12px #a9a9a9;\n}\n.error-message {\n  margin-top: 5px;\n  color: red;\n  font-size: 18px;\n}\n@media screen and (min-width: 950px) {\n  .left-container {\n    width: 52.63%;\n  }\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}