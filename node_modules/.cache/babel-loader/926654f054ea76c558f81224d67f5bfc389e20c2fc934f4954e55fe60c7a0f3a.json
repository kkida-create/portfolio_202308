{"ast":null,"code":"import \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport { computed, ref } from \"vue\";\nimport { useCartStore } from \"@/store/cart.js\";\nimport { useRouter } from \"vue-router\";\nimport { useProductStore } from \"@/store/product.js\";\nimport { onMounted } from \"vue\";\nexport default {\n  setup: function setup() {\n    onMounted(function () {\n      window.scrollTo(0, 0);\n    });\n    var cartStore = useCartStore();\n    var router = useRouter();\n    var totalQuantity = computed(function () {\n      return cartStore.cart.reduce(function (sum, product) {\n        return sum + Number(product.selectedQuantity);\n      }, 0);\n    });\n    var totalPrice = computed(function () {\n      return cartStore.cart.reduce(function (sum, product) {\n        return sum + product.price * product.selectedQuantity;\n      }, 0);\n    });\n    var errorMessage = ref(\"\");\n    function removeProduct(productId) {\n      cartStore.removeProduct(productId);\n    }\n    function setQuantity(productId, quantity) {\n      var productStore = useProductStore();\n      var product = productStore.getProductById(productId);\n      var updatedQuantity = Number(quantity);\n      if (updatedQuantity <= product.stock) {\n        cartStore.setQuantity(productId, updatedQuantity);\n      }\n    }\n    function getProductPrice(product) {\n      return product.price || product.special_price || 0;\n    }\n    function getQuantityInCart(productId) {\n      var productInCart = cartStore.cart.find(function (item) {\n        return item.product_id === productId;\n      });\n      return productInCart ? productInCart.selectedQuantity : 0;\n    }\n    function formatNumber(value) {\n      return Number(value).toLocaleString();\n    }\n    function checkAndNavigate() {\n      if (totalQuantity.value === 0) {\n        errorMessage.value = \"商品がカートに入っていません\";\n      } else {\n        errorMessage.value = \"\";\n        router.push(\"/cart-payment\");\n      }\n    }\n    function availableQuantity(product) {\n      return Array.from({\n        length: product.stock\n      }, function (_, i) {\n        return i + 1;\n      });\n    }\n    return {\n      cart: cartStore.cart,\n      totalQuantity: totalQuantity,\n      totalPrice: totalPrice,\n      removeProduct: removeProduct,\n      setQuantity: setQuantity,\n      getProductPrice: getProductPrice,\n      formatNumber: formatNumber,\n      checkAndNavigate: checkAndNavigate,\n      errorMessage: errorMessage,\n      getQuantityInCart: getQuantityInCart,\n      availableQuantity: availableQuantity\n    };\n  }\n};","map":{"version":3,"names":["computed","ref","useCartStore","useRouter","useProductStore","onMounted","setup","window","scrollTo","cartStore","router","totalQuantity","cart","reduce","sum","product","Number","selectedQuantity","totalPrice","price","errorMessage","removeProduct","productId","setQuantity","quantity","productStore","getProductById","updatedQuantity","stock","getProductPrice","special_price","getQuantityInCart","productInCart","find","item","product_id","formatNumber","value","toLocaleString","checkAndNavigate","push","availableQuantity","Array","from","length","_","i"],"sources":["/Users/kitakanta/Desktop/就活/ポートフォリオ_20230819/src/views/CartListView.vue"],"sourcesContent":["<template>\n  <main>\n    <div class=\"cart-container\">\n      <h1 class=\"cart-title\">カート一覧</h1>\n      <div class=\"contents-container\">\n        <div class=\"left-container\">\n          <div\n            class=\"cart-card\"\n            v-for=\"product in cart\"\n            :key=\"product.product_id\"\n          >\n            <figure class=\"product-photo-container\">\n              <img\n                class=\"product-photo\"\n                src=\"../assets/product_sample.jpg\"\n                alt=\"商品\"\n              />\n            </figure>\n            <div class=\"product-detail\">\n              <div class=\"product-name\">{{ product.product_name }}</div>\n              <div class=\"product-price\">\n                ¥ {{ formatNumber(getProductPrice(product)) }}(税込)\n              </div>\n              <div class=\"select-button-container\">\n                <div class=\"product-amount-container\">\n                  <p class=\"amount\">個数：</p>\n                  <select\n                    class=\"product-amount\"\n                    size=\"1\"\n                    :value=\"getQuantityInCart(product.product_id)\"\n                    @change=\"\n                      setQuantity(product.product_id, $event.target.value)\n                    \"\n                  >\n                    <option\n                      v-for=\"num in availableQuantity(product)\"\n                      :key=\"num\"\n                      :value=\"num\"\n                    >\n                      {{ num }}\n                    </option>\n                  </select>\n                </div>\n                <div class=\"size-select-container\">\n                  <p class=\"size\">サイズ：{{ product.size }}</p>\n                </div>\n              </div>\n              <button\n                class=\"delete-button\"\n                @click=\"removeProduct(product.product_id)\"\n              >\n                削除\n              </button>\n            </div>\n          </div>\n        </div>\n        <div class=\"right-container\">\n          <div class=\"total-card\">\n            <div class=\"total-quantity\">合計個数 {{ totalQuantity }} 個</div>\n            <div class=\"total-price\">\n              合計金額 ¥{{ formatNumber(totalPrice) }}(税込)\n            </div>\n            <button class=\"buying-procedure-button\" @click=\"checkAndNavigate\">\n              購入手続きへ\n            </button>\n            <p v-if=\"errorMessage\" class=\"error-message\">{{ errorMessage }}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </main>\n</template>\n\n<script>\nimport { computed, ref } from \"vue\";\nimport { useCartStore } from \"@/store/cart.js\";\nimport { useRouter } from \"vue-router\";\nimport { useProductStore } from \"@/store/product.js\";\nimport { onMounted } from \"vue\";\n\nexport default {\n  setup() {\n    onMounted(() => {\n      window.scrollTo(0, 0);\n    });\n    const cartStore = useCartStore();\n    const router = useRouter();\n    const totalQuantity = computed(() => {\n      return cartStore.cart.reduce(\n        (sum, product) => sum + Number(product.selectedQuantity),\n        0\n      );\n    });\n    const totalPrice = computed(() =>\n      cartStore.cart.reduce(\n        (sum, product) => sum + product.price * product.selectedQuantity,\n        0\n      )\n    );\n    const errorMessage = ref(\"\");\n\n    function removeProduct(productId) {\n      cartStore.removeProduct(productId);\n    }\n\n    function setQuantity(productId, quantity) {\n      const productStore = useProductStore();\n      const product = productStore.getProductById(productId);\n\n      const updatedQuantity = Number(quantity);\n      if (updatedQuantity <= product.stock) {\n        cartStore.setQuantity(productId, updatedQuantity);\n      }\n    }\n    function getProductPrice(product) {\n      return product.price || product.special_price || 0;\n    }\n    function getQuantityInCart(productId) {\n      const productInCart = cartStore.cart.find(\n        (item) => item.product_id === productId\n      );\n      return productInCart ? productInCart.selectedQuantity : 0;\n    }\n\n    function formatNumber(value) {\n      return Number(value).toLocaleString();\n    }\n\n    function checkAndNavigate() {\n      if (totalQuantity.value === 0) {\n        errorMessage.value = \"商品がカートに入っていません\";\n      } else {\n        errorMessage.value = \"\";\n        router.push(\"/cart-payment\");\n      }\n    }\n\n    function availableQuantity(product) {\n      return Array.from({ length: product.stock }, (_, i) => i + 1);\n    }\n    return {\n      cart: cartStore.cart,\n      totalQuantity,\n      totalPrice,\n      removeProduct,\n      setQuantity,\n      getProductPrice,\n      formatNumber,\n      checkAndNavigate,\n      errorMessage,\n      getQuantityInCart,\n      availableQuantity,\n    };\n  },\n};\n</script>\n\n<style scoped>\n.cart-container {\n  padding-top: 120px;\n  min-width: 950px;\n  background-color: #eeeeee;\n}\n.cart-container > * {\n  background-color: inherit;\n}\n.contents-container {\n  display: flex;\n  justify-content: space-between;\n  transition: width 0.3s ease;\n  margin-top: 30px;\n}\n.left-container {\n  width: 500px;\n  padding-left: 20px;\n}\n.cart-title {\n  font-size: 40px;\n}\n.cart-card {\n  display: flex;\n  border: 1px solid black;\n  height: 250px;\n  width: 100%;\n  padding-bottom: 20px;\n  background-color: white;\n}\n.cart-card:not(:first-of-type) {\n  margin-top: 30px;\n}\n.cart-card:last-of-type {\n  margin-bottom: 30px;\n}\n.product-photo-container {\n  width: 220px;\n  height: 220px;\n  display: block;\n  margin: 15px;\n}\n.product-photo {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n}\n.product-detail {\n  display: flex;\n  flex-direction: column;\n  padding-top: 20px;\n  align-items: center;\n  justify-content: space-between;\n  overflow: auto;\n}\n.product-name {\n  font-size: 24px;\n}\n.product-price {\n  font-size: 24px;\n  margin-top: 10px;\n}\n.select-button-container {\n  display: flex;\n}\n.product-amount-container {\n  display: flex;\n  border-radius: 4px;\n  border: 1.5px solid black;\n  align-items: center;\n}\n.product-amount {\n  border: none;\n}\n.amount {\n  margin: 0 0;\n  padding: 0 3px;\n}\n.size-select-container {\n  display: flex;\n  border-radius: 4px;\n  border: 1.5px solid black;\n  margin-left: 30px;\n  padding: 0 3px;\n}\n.size-select {\n  border: none;\n}\n.size {\n  margin: 0 0;\n}\n.delete-button {\n  background: none;\n  color: inherit;\n  border: none;\n  padding: 0;\n  font: inherit;\n  cursor: pointer;\n  outline: inherit;\n}\n.delete-button:hover {\n  color: aqua;\n  text-decoration: underline;\n}\n.right-container {\n  width: 300px;\n  padding-right: 20px;\n  text-align: center;\n}\n.total-card {\n  width: 100%;\n  height: 270px;\n  font-size: 24px;\n  border: 1px solid black;\n  background-color: white;\n}\n.total-quantity {\n  padding-top: 40px;\n}\n.total-price {\n  margin-top: 20px;\n}\n.buying-procedure-button {\n  margin-top: 50px;\n}\n.buying-procedure-button:hover {\n  background-color: darkgray;\n  box-shadow: 0 0 12px #a9a9a9;\n}\n.error-message {\n  margin-top: 5px;\n  color: red;\n  font-size: 18px;\n}\n@media screen and (min-width: 950px) {\n  .left-container {\n    width: 52.63%;\n  }\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}