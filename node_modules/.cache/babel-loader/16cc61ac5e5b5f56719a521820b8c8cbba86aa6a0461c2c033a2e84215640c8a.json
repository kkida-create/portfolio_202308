{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { defineStore } from 'pinia';\nimport { useProductStore } from './product.js'; // 商品情報を管理するストアをインポート\n\nexport const useCartStore = defineStore({\n  id: 'cart',\n  state: () => ({\n    cart: []\n  }),\n  getters: {\n    totalAmount() {\n      return this.cart.reduce((acc, curr) => acc + curr.price * curr.quantity, 0);\n    }\n  },\n  actions: {\n    addToCart(productId, quantity = 1) {\n      console.log('Adding to cart:', productId, quantity);\n      const productStore = useProductStore(); // 商品情報を管理するストアを使用\n      const product = productStore.getProductById(productId); // 商品情報を取得\n      if (!product || product.stock < quantity) {\n        // 商品が存在しない、または在庫が足りない場合は追加しない\n        return;\n      }\n      const productInCart = this.cart.find(item => item.product_id === productId);\n      if (productInCart) {\n        productInCart.quantity += quantity;\n      } else {\n        this.cart.push({\n          ...product,\n          quantity\n        });\n      }\n    },\n    decreaseQuantity(productId) {\n      const productInCart = this.cart.find(item => item.product_id === productId);\n      if (productInCart && productInCart.quantity > 0) {\n        productInCart.quantity--;\n      }\n    },\n    increaseQuantity(productId) {\n      const productStore = useProductStore();\n      const product = productStore.getProductById(productId);\n      const productInCart = this.cart.find(item => item.product_id === productId);\n      if (productInCart && productInCart.quantity < product.stock) {\n        productInCart.quantity++;\n      }\n    },\n    removeProduct(productId) {\n      const index = this.cart.findIndex(item => item.product_id === productId);\n      if (index !== -1) {\n        this.cart.splice(index, 1);\n      }\n    },\n    setQuantity(productId, quantity) {\n      const productInCart = this.cart.find(item => item.product_id === productId);\n      if (productInCart) {\n        productInCart.quantity = quantity;\n      }\n    }\n  }\n});","map":{"version":3,"names":["defineStore","useProductStore","useCartStore","id","state","cart","getters","totalAmount","reduce","acc","curr","price","quantity","actions","addToCart","productId","console","log","productStore","product","getProductById","stock","productInCart","find","item","product_id","push","decreaseQuantity","increaseQuantity","removeProduct","index","findIndex","splice","setQuantity"],"sources":["/Users/kitakanta/Desktop/comvace関係/comvace6_1/src/store/cart.js"],"sourcesContent":["import { defineStore } from 'pinia'\nimport { useProductStore } from './product.js' // 商品情報を管理するストアをインポート\n\nexport const useCartStore = defineStore({\n  id: 'cart',\n  state: () => ({\n    cart: [],\n  }),\n  getters: {\n    totalAmount() {\n      return this.cart.reduce((acc, curr) => acc + curr.price * curr.quantity, 0)\n    },\n  },\n  actions: {\n    addToCart(productId, quantity = 1) {\n      console.log('Adding to cart:', productId, quantity)\n      const productStore = useProductStore() // 商品情報を管理するストアを使用\n      const product = productStore.getProductById(productId) // 商品情報を取得\n      if (!product || product.stock < quantity) {\n        // 商品が存在しない、または在庫が足りない場合は追加しない\n        return\n      }\n\n      const productInCart = this.cart.find((item) => item.product_id === productId)\n      if (productInCart) {\n        productInCart.quantity += quantity\n      } else {\n        this.cart.push({ ...product, quantity })\n      }\n    },\n    decreaseQuantity(productId) {\n      const productInCart = this.cart.find((item) => item.product_id === productId)\n      if (productInCart && productInCart.quantity > 0) {\n        productInCart.quantity--\n      }\n    },\n    increaseQuantity(productId) {\n      const productStore = useProductStore()\n      const product = productStore.getProductById(productId)\n      const productInCart = this.cart.find((item) => item.product_id === productId)\n      if (productInCart && productInCart.quantity < product.stock) {\n        productInCart.quantity++\n      }\n    },\n    removeProduct(productId) {\n      const index = this.cart.findIndex((item) => item.product_id === productId)\n      if (index !== -1) {\n        this.cart.splice(index, 1)\n      }\n    },\n    setQuantity(productId, quantity) {\n      const productInCart = this.cart.find((item) => item.product_id === productId)\n      if (productInCart) {\n        productInCart.quantity = quantity\n      }\n    },\n  },\n})\n"],"mappings":";AAAA,SAASA,WAAW,QAAQ,OAAO;AACnC,SAASC,eAAe,QAAQ,cAAc,EAAC;;AAE/C,OAAO,MAAMC,YAAY,GAAGF,WAAW,CAAC;EACtCG,EAAE,EAAE,MAAM;EACVC,KAAK,EAAEA,CAAA,MAAO;IACZC,IAAI,EAAE;EACR,CAAC,CAAC;EACFC,OAAO,EAAE;IACPC,WAAWA,CAAA,EAAG;MACZ,OAAO,IAAI,CAACF,IAAI,CAACG,MAAM,CAAC,CAACC,GAAG,EAAEC,IAAI,KAAKD,GAAG,GAAGC,IAAI,CAACC,KAAK,GAAGD,IAAI,CAACE,QAAQ,EAAE,CAAC,CAAC;IAC7E;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,SAASA,CAACC,SAAS,EAAEH,QAAQ,GAAG,CAAC,EAAE;MACjCI,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEF,SAAS,EAAEH,QAAQ,CAAC;MACnD,MAAMM,YAAY,GAAGjB,eAAe,CAAC,CAAC,EAAC;MACvC,MAAMkB,OAAO,GAAGD,YAAY,CAACE,cAAc,CAACL,SAAS,CAAC,EAAC;MACvD,IAAI,CAACI,OAAO,IAAIA,OAAO,CAACE,KAAK,GAAGT,QAAQ,EAAE;QACxC;QACA;MACF;MAEA,MAAMU,aAAa,GAAG,IAAI,CAACjB,IAAI,CAACkB,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACC,UAAU,KAAKV,SAAS,CAAC;MAC7E,IAAIO,aAAa,EAAE;QACjBA,aAAa,CAACV,QAAQ,IAAIA,QAAQ;MACpC,CAAC,MAAM;QACL,IAAI,CAACP,IAAI,CAACqB,IAAI,CAAC;UAAE,GAAGP,OAAO;UAAEP;QAAS,CAAC,CAAC;MAC1C;IACF,CAAC;IACDe,gBAAgBA,CAACZ,SAAS,EAAE;MAC1B,MAAMO,aAAa,GAAG,IAAI,CAACjB,IAAI,CAACkB,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACC,UAAU,KAAKV,SAAS,CAAC;MAC7E,IAAIO,aAAa,IAAIA,aAAa,CAACV,QAAQ,GAAG,CAAC,EAAE;QAC/CU,aAAa,CAACV,QAAQ,EAAE;MAC1B;IACF,CAAC;IACDgB,gBAAgBA,CAACb,SAAS,EAAE;MAC1B,MAAMG,YAAY,GAAGjB,eAAe,CAAC,CAAC;MACtC,MAAMkB,OAAO,GAAGD,YAAY,CAACE,cAAc,CAACL,SAAS,CAAC;MACtD,MAAMO,aAAa,GAAG,IAAI,CAACjB,IAAI,CAACkB,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACC,UAAU,KAAKV,SAAS,CAAC;MAC7E,IAAIO,aAAa,IAAIA,aAAa,CAACV,QAAQ,GAAGO,OAAO,CAACE,KAAK,EAAE;QAC3DC,aAAa,CAACV,QAAQ,EAAE;MAC1B;IACF,CAAC;IACDiB,aAAaA,CAACd,SAAS,EAAE;MACvB,MAAMe,KAAK,GAAG,IAAI,CAACzB,IAAI,CAAC0B,SAAS,CAAEP,IAAI,IAAKA,IAAI,CAACC,UAAU,KAAKV,SAAS,CAAC;MAC1E,IAAIe,KAAK,KAAK,CAAC,CAAC,EAAE;QAChB,IAAI,CAACzB,IAAI,CAAC2B,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC;MAC5B;IACF,CAAC;IACDG,WAAWA,CAAClB,SAAS,EAAEH,QAAQ,EAAE;MAC/B,MAAMU,aAAa,GAAG,IAAI,CAACjB,IAAI,CAACkB,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACC,UAAU,KAAKV,SAAS,CAAC;MAC7E,IAAIO,aAAa,EAAE;QACjBA,aAAa,CAACV,QAAQ,GAAGA,QAAQ;MACnC;IACF;EACF;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}