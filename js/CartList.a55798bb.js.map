{"version":3,"file":"js/CartList.a55798bb.js","mappings":"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","sources":["webpack://ec_site/./node_modules/core-js/internals/array-from.js","webpack://ec_site/./node_modules/core-js/internals/call-with-safe-iteration-closing.js","webpack://ec_site/./node_modules/core-js/modules/es.array.from.js","webpack://ec_site/./src/views/CartListView.vue","webpack://ec_site/./src/views/CartListView.vue?6d74"],"sourcesContent":["'use strict';\nvar bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar toObject = require('../internals/to-object');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar isConstructor = require('../internals/is-constructor');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar createProperty = require('../internals/create-property');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\nvar $Array = Array;\n\n// `Array.from` method implementation\n// https://tc39.es/ecma262/#sec-array.from\nmodule.exports = function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n  var O = toObject(arrayLike);\n  var IS_CONSTRUCTOR = isConstructor(this);\n  var argumentsLength = arguments.length;\n  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n  var mapping = mapfn !== undefined;\n  if (mapping) mapfn = bind(mapfn, argumentsLength > 2 ? arguments[2] : undefined);\n  var iteratorMethod = getIteratorMethod(O);\n  var index = 0;\n  var length, result, step, iterator, next, value;\n  // if the target is not iterable or it's an array with the default iterator - use a simple case\n  if (iteratorMethod && !(this === $Array && isArrayIteratorMethod(iteratorMethod))) {\n    iterator = getIterator(O, iteratorMethod);\n    next = iterator.next;\n    result = IS_CONSTRUCTOR ? new this() : [];\n    for (;!(step = call(next, iterator)).done; index++) {\n      value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index], true) : step.value;\n      createProperty(result, index, value);\n    }\n  } else {\n    length = lengthOfArrayLike(O);\n    result = IS_CONSTRUCTOR ? new this(length) : $Array(length);\n    for (;length > index; index++) {\n      value = mapping ? mapfn(O[index], index) : O[index];\n      createProperty(result, index, value);\n    }\n  }\n  result.length = index;\n  return result;\n};\n","var anObject = require('../internals/an-object');\nvar iteratorClose = require('../internals/iterator-close');\n\n// call something on iterator step with safe closing on error\nmodule.exports = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  } catch (error) {\n    iteratorClose(iterator, 'throw', error);\n  }\n};\n","var $ = require('../internals/export');\nvar from = require('../internals/array-from');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\n\nvar INCORRECT_ITERATION = !checkCorrectnessOfIteration(function (iterable) {\n  // eslint-disable-next-line es/no-array-from -- required for testing\n  Array.from(iterable);\n});\n\n// `Array.from` method\n// https://tc39.es/ecma262/#sec-array.from\n$({ target: 'Array', stat: true, forced: INCORRECT_ITERATION }, {\n  from: from\n});\n","<template>\n  <main>\n    <div class=\"cart-container\">\n      <h1 class=\"cart-title\">カート一覧</h1>\n      <div class=\"contents-container\">\n        <div class=\"left-container\">\n          <div\n            class=\"cart-card\"\n            v-for=\"product in cart\"\n            :key=\"product.product_id\"\n          >\n            <figure class=\"product-photo-container\">\n              <img\n                class=\"product-photo\"\n                src=\"../assets/product_sample.jpg\"\n                alt=\"商品\"\n              />\n            </figure>\n            <div class=\"product-detail\">\n              <div class=\"product-name\">{{ product.product_name }}</div>\n              <div class=\"product-price\">\n                ¥ {{ formatNumber(getProductPrice(product)) }}(税込)\n              </div>\n              <div class=\"select-button-container\">\n                <div class=\"product-amount-container\">\n                  <p class=\"amount\">個数：</p>\n                  <select\n                    class=\"product-amount\"\n                    size=\"1\"\n                    :value=\"getQuantityInCart(product.product_id)\"\n                    @change=\"\n                      setQuantity(product.product_id, $event.target.value)\n                    \"\n                  >\n                    <option\n                      v-for=\"num in availableQuantity(product)\"\n                      :key=\"num\"\n                      :value=\"num\"\n                    >\n                      {{ num }}\n                    </option>\n                  </select>\n                </div>\n                <div class=\"size-select-container\">\n                  <p class=\"size\">サイズ：{{ product.size }}</p>\n                </div>\n              </div>\n              <button\n                class=\"delete-button\"\n                @click=\"removeProduct(product.product_id)\"\n              >\n                削除\n              </button>\n            </div>\n          </div>\n        </div>\n        <div class=\"right-container\">\n          <div class=\"total-card\">\n            <div class=\"total-quantity\">合計個数 {{ totalQuantity }} 個</div>\n            <div class=\"total-price\">\n              合計金額 ¥{{ formatNumber(totalPrice) }}(税込)\n            </div>\n            <button class=\"buying-procedure-button\" @click=\"checkAndNavigate\">\n              購入手続きへ\n            </button>\n            <p v-if=\"errorMessage\" class=\"error-message\">{{ errorMessage }}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </main>\n</template>\n\n<script>\nimport { computed, ref } from \"vue\";\nimport { useCartStore } from \"@/store/cart.js\";\nimport { useRouter } from \"vue-router\";\nimport { useProductStore } from \"@/store/product.js\";\nimport { onMounted } from \"vue\";\n\nexport default {\n  setup() {\n    onMounted(() => {\n      window.scrollTo(0, 0);\n    });\n    const cartStore = useCartStore();\n    const router = useRouter();\n    const totalQuantity = computed(() => {\n      return cartStore.cart.reduce(\n        (sum, product) => sum + Number(product.selectedQuantity),\n        0\n      );\n    });\n    const totalPrice = computed(() =>\n      cartStore.cart.reduce(\n        (sum, product) => sum + product.price * product.selectedQuantity,\n        0\n      )\n    );\n    const errorMessage = ref(\"\");\n\n    function removeProduct(productId) {\n      cartStore.removeProduct(productId);\n    }\n\n    function setQuantity(productId, quantity) {\n      const productStore = useProductStore();\n      const product = productStore.getProductById(productId);\n\n      const updatedQuantity = Number(quantity);\n      if (updatedQuantity <= product.stock) {\n        cartStore.setQuantity(productId, updatedQuantity);\n      }\n    }\n    function getProductPrice(product) {\n      return product.price || product.special_price || 0;\n    }\n    function getQuantityInCart(productId) {\n      const productInCart = cartStore.cart.find(\n        (item) => item.product_id === productId\n      );\n      return productInCart ? productInCart.selectedQuantity : 0;\n    }\n\n    function formatNumber(value) {\n      return Number(value).toLocaleString();\n    }\n\n    function checkAndNavigate() {\n      if (totalQuantity.value === 0) {\n        errorMessage.value = \"商品がカートに入っていません\";\n      } else {\n        errorMessage.value = \"\";\n        router.push(\"/cart-payment\");\n      }\n    }\n\n    function availableQuantity(product) {\n      return Array.from({ length: product.stock }, (_, i) => i + 1);\n    }\n    return {\n      cart: cartStore.cart,\n      totalQuantity,\n      totalPrice,\n      removeProduct,\n      setQuantity,\n      getProductPrice,\n      formatNumber,\n      checkAndNavigate,\n      errorMessage,\n      getQuantityInCart,\n      availableQuantity,\n    };\n  },\n};\n</script>\n\n<style scoped>\n.cart-container {\n  padding-top: 120px;\n  min-width: 950px;\n  background-color: #eeeeee;\n}\n.cart-container > * {\n  background-color: inherit;\n}\n.contents-container {\n  display: flex;\n  justify-content: space-between;\n  transition: width 0.3s ease;\n  margin-top: 30px;\n}\n.left-container {\n  width: 500px;\n  padding-left: 20px;\n}\n.cart-title {\n  font-size: 40px;\n}\n.cart-card {\n  display: flex;\n  border: 1px solid black;\n  height: 250px;\n  width: 100%;\n  padding-bottom: 20px;\n  background-color: white;\n}\n.cart-card:not(:first-of-type) {\n  margin-top: 30px;\n}\n.cart-card:last-of-type {\n  margin-bottom: 30px;\n}\n.product-photo-container {\n  width: 220px;\n  height: 220px;\n  display: block;\n  margin: 15px;\n}\n.product-photo {\n  width: 100%;\n  height: 100%;\n  object-fit: contain;\n}\n.product-detail {\n  display: flex;\n  flex-direction: column;\n  padding-top: 20px;\n  align-items: center;\n  justify-content: space-between;\n  overflow: auto;\n}\n.product-name {\n  font-size: 24px;\n}\n.product-price {\n  font-size: 24px;\n  margin-top: 10px;\n}\n.select-button-container {\n  display: flex;\n}\n.product-amount-container {\n  display: flex;\n  border-radius: 4px;\n  border: 1.5px solid black;\n  align-items: center;\n}\n.product-amount {\n  border: none;\n}\n.amount {\n  margin: 0 0;\n  padding: 0 3px;\n}\n.size-select-container {\n  display: flex;\n  border-radius: 4px;\n  border: 1.5px solid black;\n  margin-left: 30px;\n  padding: 0 3px;\n}\n.size-select {\n  border: none;\n}\n.size {\n  margin: 0 0;\n}\n.delete-button {\n  background: none;\n  color: inherit;\n  border: none;\n  padding: 0;\n  font: inherit;\n  cursor: pointer;\n  outline: inherit;\n}\n.delete-button:hover {\n  color: aqua;\n  text-decoration: underline;\n}\n.right-container {\n  width: 300px;\n  padding-right: 20px;\n  text-align: center;\n}\n.total-card {\n  width: 100%;\n  height: 270px;\n  font-size: 24px;\n  border: 1px solid black;\n  background-color: white;\n}\n.total-quantity {\n  padding-top: 40px;\n}\n.total-price {\n  margin-top: 20px;\n}\n.buying-procedure-button {\n  margin-top: 50px;\n}\n.buying-procedure-button:hover {\n  background-color: darkgray;\n  box-shadow: 0 0 12px #a9a9a9;\n}\n.error-message {\n  margin-top: 5px;\n  color: red;\n  font-size: 18px;\n}\n@media screen and (min-width: 950px) {\n  .left-container {\n    width: 52.63%;\n  }\n}\n</style>\n","import { render } from \"./CartListView.vue?vue&type=template&id=e296ef44&scoped=true\"\nimport script from \"./CartListView.vue?vue&type=script&lang=js\"\nexport * from \"./CartListView.vue?vue&type=script&lang=js\"\n\nimport \"./CartListView.vue?vue&type=style&index=0&id=e296ef44&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e296ef44\"]])\n\nexport default __exports__"],"names":["bind","call","toObject","callWithSafeIterationClosing","isArrayIteratorMethod","isConstructor","lengthOfArrayLike","createProperty","getIterator","getIteratorMethod","$Array","Array","module","exports","arrayLike","O","IS_CONSTRUCTOR","this","argumentsLength","arguments","length","mapfn","undefined","mapping","result","step","iterator","next","value","iteratorMethod","index","done","anObject","iteratorClose","fn","ENTRIES","error","$","from","checkCorrectnessOfIteration","INCORRECT_ITERATION","iterable","target","stat","forced","class","_createElementVNode","src","_imports_0","alt","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_Fragment","_renderList","$setup","cart","product","key","product_id","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","product_name","_hoisted_8","formatNumber","getProductPrice","_hoisted_9","_hoisted_10","_hoisted_11","size","getQuantityInCart","onChange","$event","setQuantity","availableQuantity","num","_hoisted_13","_hoisted_14","_hoisted_15","onClick","removeProduct","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","totalQuantity","_hoisted_20","totalPrice","_cache","checkAndNavigate","apply","errorMessage","_hoisted_21","setup","onMounted","window","scrollTo","cartStore","useCartStore","router","useRouter","computed","reduce","sum","Number","selectedQuantity","price","ref","productId","quantity","productStore","useProductStore","getProductById","updatedQuantity","stock","special_price","productInCart","find","item","toLocaleString","push","_","i","__exports__","render"],"sourceRoot":""}