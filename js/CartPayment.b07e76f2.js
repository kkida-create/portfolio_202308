(self["webpackChunkec_site"]=self["webpackChunkec_site"]||[]).push([[947],{8457:(e,t,r)=>{"use strict";var n=r(9974),d=r(6916),a=r(7908),s=r(3411),l=r(7659),i=r(4411),c=r(6244),o=r(6135),u=r(4121),v=r(1246),p=Array;e.exports=function(e){var t=a(e),r=i(this),C=arguments.length,m=C>1?arguments[1]:void 0,f=void 0!==m;f&&(m=n(m,C>2?arguments[2]:void 0));var y,h,g,b,_,x,M=v(t),w=0;if(!M||this===p&&l(M))for(y=c(t),h=r?new this(y):p(y);y>w;w++)x=f?m(t[w],w):t[w],o(h,w,x);else for(b=u(t,M),_=b.next,h=r?new this:[];!(g=d(_,b)).done;w++)x=f?s(b,m,[g.value,w],!0):g.value,o(h,w,x);return h.length=w,h}},3411:(e,t,r)=>{var n=r(9670),d=r(9212);e.exports=function(e,t,r,a){try{return a?t(n(r)[0],r[1]):t(r)}catch(s){d(e,"throw",s)}}},3009:(e,t,r)=>{var n=r(7854),d=r(7293),a=r(1702),s=r(1340),l=r(3111).trim,i=r(1361),c=n.parseInt,o=n.Symbol,u=o&&o.iterator,v=/^[+-]?0x/i,p=a(v.exec),C=8!==c(i+"08")||22!==c(i+"0x16")||u&&!d((function(){c(Object(u))}));e.exports=C?function(e,t){var r=l(s(e));return c(r,t>>>0||(p(v,r)?16:10))}:c},2261:(e,t,r)=>{"use strict";var n=r(6916),d=r(1702),a=r(1340),s=r(7066),l=r(2999),i=r(2309),c=r(30),o=r(9909).get,u=r(9441),v=r(7168),p=i("native-string-replace",String.prototype.replace),C=RegExp.prototype.exec,m=C,f=d("".charAt),y=d("".indexOf),h=d("".replace),g=d("".slice),b=function(){var e=/a/,t=/b*/g;return n(C,e,"a"),n(C,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),_=l.BROKEN_CARET,x=void 0!==/()??/.exec("")[1],M=b||x||_||u||v;M&&(m=function(e){var t,r,d,l,i,u,v,M=this,w=o(M),A=a(e),k=w.raw;if(k)return k.lastIndex=M.lastIndex,t=n(m,k,A),M.lastIndex=k.lastIndex,t;var I=w.groups,S=_&&M.sticky,D=n(s,M),P=M.source,V=0,H=A;if(S&&(D=h(D,"y",""),-1===y(D,"g")&&(D+="g"),H=g(A,M.lastIndex),M.lastIndex>0&&(!M.multiline||M.multiline&&"\n"!==f(A,M.lastIndex-1))&&(P="(?: "+P+")",H=" "+H,V++),r=new RegExp("^(?:"+P+")",D)),x&&(r=new RegExp("^"+P+"$(?!\\s)",D)),b&&(d=M.lastIndex),l=n(C,S?r:M,H),S?l?(l.input=g(l.input,V),l[0]=g(l[0],V),l.index=M.lastIndex,M.lastIndex+=l[0].length):M.lastIndex=0:b&&l&&(M.lastIndex=M.global?l.index+l[0].length:d),x&&l&&l.length>1&&n(p,l[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(l[i]=void 0)})),l&&I)for(l.groups=u=c(null),i=0;i<I.length;i++)v=I[i],u[v[0]]=l[v[1]];return l}),e.exports=m},7066:(e,t,r)=>{"use strict";var n=r(9670);e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},2999:(e,t,r)=>{var n=r(7293),d=r(7854),a=d.RegExp,s=n((function(){var e=a("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),l=s||n((function(){return!a("a","y").sticky})),i=s||n((function(){var e=a("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:i,MISSED_STICKY:l,UNSUPPORTED_Y:s}},9441:(e,t,r)=>{var n=r(7293),d=r(7854),a=d.RegExp;e.exports=n((function(){var e=a(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},7168:(e,t,r)=>{var n=r(7293),d=r(7854),a=d.RegExp;e.exports=n((function(){var e=a("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},2222:(e,t,r)=>{"use strict";var n=r(2109),d=r(7293),a=r(3157),s=r(111),l=r(7908),i=r(6244),c=r(7207),o=r(6135),u=r(5417),v=r(1194),p=r(5112),C=r(7392),m=p("isConcatSpreadable"),f=C>=51||!d((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),y=function(e){if(!s(e))return!1;var t=e[m];return void 0!==t?!!t:a(e)},h=!f||!v("concat");n({target:"Array",proto:!0,arity:1,forced:h},{concat:function(e){var t,r,n,d,a,s=l(this),v=u(s,0),p=0;for(t=-1,n=arguments.length;t<n;t++)if(a=-1===t?s:arguments[t],y(a))for(d=i(a),c(p+d),r=0;r<d;r++,p++)r in a&&o(v,p,a[r]);else c(p+1),o(v,p++,a);return v.length=p,v}})},1038:(e,t,r)=>{var n=r(2109),d=r(8457),a=r(7072),s=!a((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:s},{from:d})},3710:(e,t,r)=>{var n=r(1702),d=r(8052),a=Date.prototype,s="Invalid Date",l="toString",i=n(a[l]),c=n(a.getTime);String(new Date(NaN))!=s&&d(a,l,(function(){var e=c(this);return e===e?i(this):s}))},1058:(e,t,r)=>{var n=r(2109),d=r(3009);n({global:!0,forced:parseInt!=d},{parseInt:d})},4916:(e,t,r)=>{"use strict";var n=r(2109),d=r(2261);n({target:"RegExp",proto:!0,forced:/./.exec!==d},{exec:d})},7601:(e,t,r)=>{"use strict";r(4916);var n=r(2109),d=r(6916),a=r(614),s=r(9670),l=r(1340),i=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),c=/./.test;n({target:"RegExp",proto:!0,forced:!i},{test:function(e){var t=s(this),r=l(e),n=t.exec;if(!a(n))return d(c,t,r);var i=d(n,t,r);return null!==i&&(s(i),!0)}})},3650:(e,t,r)=>{"use strict";var n=r(2109),d=r(1702),a=r(4488),s=r(9303),l=r(1340),i=d("".slice),c=Math.max,o=Math.min,u=!"".substr||"b"!=="ab".substr(-1);n({target:"String",proto:!0,forced:u},{substr:function(e,t){var r,n,d=l(a(this)),u=d.length,v=s(e);return v===1/0&&(v=0),v<0&&(v=c(u+v,0)),r=void 0===t?u:s(t),r<=0||r===1/0?"":(n=o(v+r,u),v>=n?"":i(d,v,n))}})},6502:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Ne});r(8309),r(2526),r(1817);var n=r(6252),d=r(3577),a=function(e){return(0,n.dD)("data-v-5ba375cf"),e=e(),(0,n.Cn)(),e},s={class:"payment-top"},l=a((function(){return(0,n._)("h1",{class:"page-title"},"支払い画面",-1)})),i={class:"contents-container"},c={class:"address-container"},o=a((function(){return(0,n._)("p",{class:"address-title"},"1 住所",-1)})),u=["onClick"],v={class:"address-text"},p=["onClick"],C=a((function(){return(0,n._)("div",{class:"cross"},null,-1)})),m={class:"payment-container"},f=a((function(){return(0,n._)("p",{class:"payment-title"},"2 お支払い方法",-1)})),y=["onClick"],h={class:"payment-info-contents"},g={class:"payment-info"},b={class:"payment-text"},_={class:"payment-content"},x={class:"button-container"},M={class:"cart-button-container"},w={key:0,class:"error-message"},A={key:3,class:"overlay"};function k(e,t,r,a,k,I){var S=(0,n.up)("AddressModal"),D=(0,n.up)("CreditModal");return(0,n.wg)(),(0,n.iD)("main",null,[(0,n._)("div",s,[l,(0,n._)("div",i,[(0,n._)("div",c,[o,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.displayedAddresses,(function(e,t){return(0,n.wg)(),(0,n.iD)("div",{class:"address-select-container",key:t},[(0,n._)("div",{class:"outer-circle",onClick:function(e){return a.toggleAddressCircle(t)}},[(0,n._)("div",{class:(0,d.C_)(["inner-circle",{"inner-circle-selected":a.selectedAddressIndex===t&&a.selectedAddressCircle}])},null,2)],8,u),(0,n._)("div",v,(0,d.zw)(e.address),1),(0,n._)("button",{class:"delete-address-button",onClick:function(e){return a.deleteAddress(t)}}," 削除 ",8,p)])})),128)),(0,n._)("div",{class:"address-registration",onClick:t[0]||(t[0]=function(){return a.openAddressModal&&a.openAddressModal.apply(a,arguments)})},[C,(0,n.Uk)(" 新しい住所を登録 ")])]),(0,n._)("div",m,[f,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.paymentMethods,(function(e,r){return(0,n.wg)(),(0,n.iD)("div",{class:"payment-info-container",key:r},[(0,n._)("div",{class:"outer-circle",onClick:function(e){return a.togglePaymentMethodCircle(r)}},[(0,n._)("div",{class:(0,d.C_)(["inner-circle",{"inner-circle-selected":a.selectedPaymentMethodIndex===r}])},null,2)],8,y),(0,n._)("div",h,[(0,n._)("div",g,[(0,n._)("p",b,(0,d.zw)(e.name),1),(0,n._)("p",_,(0,d.zw)(e.description),1)]),e.hasModalButton?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"credit-modal-open",onClick:t[1]||(t[1]=function(){return a.openCreditModal&&a.openCreditModal.apply(a,arguments)})}," クレジットカードの変更 ")):(0,n.kq)("",!0)])])})),128))])]),(0,n._)("div",x,[(0,n._)("button",{class:"return-to-cart",onClick:t[2]||(t[2]=function(){return I.returnToCart&&I.returnToCart.apply(I,arguments)})}," ← カート一覧へ戻る "),(0,n._)("div",M,[(0,n._)("button",{class:"go-to-cart-check",onClick:t[3]||(t[3]=function(){return a.goToCartCheck&&a.goToCartCheck.apply(a,arguments)})}," ご注文確認へ進む → ")])]),a.errorMessage?((0,n.wg)(),(0,n.iD)("p",w,(0,d.zw)(a.errorMessage),1)):(0,n.kq)("",!0),a.isAddressModalVisible?((0,n.wg)(),(0,n.j4)(S,{key:1,onSubmitForm:t[4]||(t[4]=function(e){return a.submitForm(e)}),onCloseModal:a.closeModal},null,8,["onCloseModal"])):(0,n.kq)("",!0),a.isCreditModalVisible?((0,n.wg)(),(0,n.j4)(D,{key:2,onCloseModal:a.closeModal},null,8,["onCloseModal"])):(0,n.kq)("",!0),a.isAddressModalVisible||a.isCreditModalVisible?((0,n.wg)(),(0,n.iD)("div",A)):(0,n.kq)("",!0)])])}r(7042),r(2222),r(7658);var I=r(2262),S=r(9963),D=function(e){return(0,n.dD)("data-v-46be17d3"),e=e(),(0,n.Cn)(),e},P={class:"address-modal-container"},V={class:"address-modal"},H={class:"top-container"},N=D((function(){return(0,n._)("p",{class:"top-message"},"新しいお届け先を入力",-1)})),q={class:"post-code-input-container"},E=D((function(){return(0,n._)("p",{class:"post-code-title"},"郵便番号",-1)})),F={class:"prefecture-input-container"},U=D((function(){return(0,n._)("p",{class:"prefecture-title"},"都道府県",-1)})),z=["value"],R={class:"city-input-container"},T=D((function(){return(0,n._)("p",{class:"city-title"},"市区町村",-1)})),Y={class:"house-number-input-container"},K=D((function(){return(0,n._)("p",{class:"house-number-title"},"丁目・番地・号",-1)})),$={class:"building-name-input-container"},B=D((function(){return(0,n._)("p",{class:"building-name-title"},"建物名/会社名・部屋番号",-1)})),O=D((function(){return(0,n._)("button",{class:"address-admit-button",type:"submit"}," この住所を登録 ",-1)})),Z={key:0,class:"overlay"};function j(e,t,r,a,s,l){return(0,n.wg)(),(0,n.iD)("div",P,[(0,n._)("div",V,[(0,n._)("div",H,[N,(0,n._)("button",{class:"close-modal-button",onClick:t[0]||(t[0]=function(t){return e.$emit("close-modal")})}," × ")]),(0,n._)("form",{class:"address-input-container",onSubmit:t[6]||(t[6]=(0,S.iM)((function(){return l.submitForm&&l.submitForm.apply(l,arguments)}),["prevent"]))},[(0,n._)("div",q,[E,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=function(e){return s.postCode=e}),class:"post-code-input",pattern:"\\d{7}",title:"半角数字7文字で入力してください",placeholder:"ハイフンなし",required:""},null,512),[[S.nr,s.postCode]])]),(0,n._)("div",F,[U,(0,n.wy)((0,n._)("select",{class:"prefecture-select",size:"1","onUpdate:modelValue":t[2]||(t[2]=function(e){return s.selectedPrefecture=e}),required:""},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.prefectures,(function(e){return(0,n.wg)(),(0,n.iD)("option",{key:e,value:e,class:"prefecture-option"},(0,d.zw)(e),9,z)})),128))],512),[[S.bM,s.selectedPrefecture]])]),(0,n._)("div",R,[T,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=function(e){return s.city=e}),class:"city-input",placeholder:"〇〇市〇〇区〇〇町",required:""},null,512),[[S.nr,s.city]])]),(0,n._)("div",Y,[K,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=function(e){return s.houseNumber=e}),class:"house-number-input",placeholder:"1-2-3",required:""},null,512),[[S.nr,s.houseNumber]])]),(0,n._)("div",$,[B,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=function(e){return s.buildingName=e}),class:"building-name-input",placeholder:"〇〇マンション〇〇〇号室"},null,512),[[S.nr,s.buildingName]])]),O,s.isAddressModalVisible?((0,n.wg)(),(0,n.iD)("div",Z)):(0,n.kq)("",!0)],32)])])}const J={data:function(){return{prefectures:["北海道","青森県","岩手県","宮城県","秋田県","山形県","福島県","茨城県","栃木県","群馬県","埼玉県","千葉県","東京都","神奈川県","新潟県","富山県","石川県","福井県","山梨県","長野県","岐阜県","静岡県","愛知県","三重県","滋賀県","京都府","大阪府","兵庫県","奈良県","和歌山県","鳥取県","島根県","岡山県","広島県","山口県","徳島県","香川県","愛媛県","高知県","福岡県","佐賀県","長崎県","熊本県","大分県","宮崎県","鹿児島県","沖縄県"],isAddressModalVisible:!1,postCode:"",selectedPrefecture:"",city:"",houseNumber:"",buildingName:""}},methods:{submitForm:function(){var e={postCode:this.postCode,selectedPrefecture:this.selectedPrefecture,city:this.city,houseNumber:this.houseNumber,buildingName:this.buildingName};this.$emit("submit-form",e),this.postCode="",this.selectedPrefecture="",this.city="",this.houseNumber="",this.buildingName=""},openAddressModal:function(){this.isAddressModalVisible=!0}}};var G=r(3744);const L=(0,G.Z)(J,[["render",j],["__scopeId","data-v-46be17d3"]]),Q=L;var W={class:"credit-modal-container"},X={class:"credit-modal"},ee={class:"top-container"},te=(0,n._)("h1",{class:"credit-modal-title"},"お客様のクレジットカード",-1),re=["onClick"],ne={class:"credit-info"},de={class:"credit-company"},ae={class:"credit-last-number"},se={class:"credit-name"},le={class:"credit-date"},ie=["onClick"],ce=(0,n._)("div",{class:"cross"},null,-1),oe={key:0,class:"add-credit-modal"},ue={class:"credit-number-container"},ve=(0,n._)("div",{class:"credit-number"},"カード番号",-1),pe={class:"credit-name-container"},Ce=(0,n._)("div",{class:"credit-name-title"},"カード名義人",-1),me={class:"credit-date-container"},fe=(0,n._)("div",{class:"credit-date-title"},"有効期限",-1),ye={class:"credit-date-select"},he=(0,n._)("option",{value:""},"月",-1),ge=["value"],be=(0,n._)("option",{value:""},"年",-1),_e=["value"],xe={class:"credit-security-container"},Me=(0,n._)("div",{class:"credit-security-title"},"セキュリティコード",-1),we={key:1,class:"overlay"};function Ae(e,t,r,a,s,l){return(0,n.wg)(),(0,n.iD)("div",W,[(0,n._)("div",X,[(0,n._)("div",ee,[te,(0,n._)("button",{class:"close-modal-button",onClick:t[0]||(t[0]=function(t){return e.$emit("close-modal")})}," × ")]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.displayedCreditCards,(function(e,t){return(0,n.wg)(),(0,n.iD)("div",{class:"credit-info-container",key:t},[(0,n._)("div",{class:"outer-circle",onClick:function(e){return a.toggleCreditCardCircle(t)}},[(0,n._)("div",{class:(0,d.C_)(["inner-circle",{"inner-circle-selected":a.selectedCreditCardIndex===t}])},null,2)],8,re),(0,n._)("div",ne,[(0,n._)("div",de,(0,d.zw)(e.company),1),(0,n._)("div",ae," 末尾:"+(0,d.zw)(e.number.slice(-4)),1),(0,n._)("div",se,(0,d.zw)(e.name),1),(0,n._)("div",le,(0,d.zw)(e.month)+"/"+(0,d.zw)(e.year),1)]),(0,n._)("button",{class:"delete-credit-card-button",onClick:function(e){return a.deleteCreditCard(t)}}," 削除 ",8,ie)])})),128)),(0,n._)("div",{class:"credit-registration",onClick:t[1]||(t[1]=function(){return a.openCreditAddModal&&a.openCreditAddModal.apply(a,arguments)})},[ce,(0,n.Uk)(" 新しいクレジットカードを追加 ")]),a.isCreditAddModalVisible?((0,n.wg)(),(0,n.iD)("div",oe,[(0,n._)("button",{class:"close-sub-modal-button",onClick:t[2]||(t[2]=function(){return a.closeCreditAddModal&&a.closeCreditAddModal.apply(a,arguments)})}," × "),(0,n._)("form",{class:"modal-contents",onSubmit:t[9]||(t[9]=(0,S.iM)((function(){return a.addCreditCard&&a.addCreditCard.apply(a,arguments)}),["prevent"]))},[(0,n._)("div",ue,[ve,(0,n.wy)((0,n._)("input",{type:"text",class:"credit-number-input","onUpdate:modelValue":t[3]||(t[3]=function(e){return a.newCreditCard.number=e}),required:""},null,512),[[S.nr,a.newCreditCard.number]])]),(0,n._)("div",pe,[Ce,(0,n.wy)((0,n._)("input",{type:"text",class:"credit-name-input","onUpdate:modelValue":t[4]||(t[4]=function(e){return a.newCreditCard.name=e}),required:""},null,512),[[S.nr,a.newCreditCard.name]])]),(0,n._)("div",me,[fe,(0,n._)("div",ye,[(0,n.wy)((0,n._)("select",{class:"credit-month-select","onUpdate:modelValue":t[5]||(t[5]=function(e){return a.newCreditCard.month=e}),required:""},[he,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.months,(function(e){return(0,n.wg)(),(0,n.iD)("option",{value:e,key:e},(0,d.zw)(e),9,ge)})),128))],512),[[S.bM,a.newCreditCard.month]]),(0,n.wy)((0,n._)("select",{class:"credit-year-select","onUpdate:modelValue":t[6]||(t[6]=function(e){return a.newCreditCard.year=e}),required:""},[be,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.years,(function(e){return(0,n.wg)(),(0,n.iD)("option",{value:e,key:e},(0,d.zw)(e),9,_e)})),128))],512),[[S.bM,a.newCreditCard.year]])])]),(0,n._)("div",xe,[Me,(0,n.wy)((0,n._)("input",{type:"password",pattern:"\\d{3,4}",class:"credit-security-input","onUpdate:modelValue":t[7]||(t[7]=function(e){return a.newCreditCard.securityCode=e}),required:""},null,512),[[S.nr,a.newCreditCard.securityCode]])]),(0,n._)("button",{class:"credit-submit",type:"submit",onClick:t[8]||(t[8]=(0,S.iM)((function(){return a.addCreditCard&&a.addCreditCard.apply(a,arguments)}),["prevent"]))}," カード追加 ")],32)])):(0,n.kq)("",!0),a.isCreditModalVisible?((0,n.wg)(),(0,n.iD)("div",we)):(0,n.kq)("",!0)])])}r(1038),r(8783),r(3710),r(4916),r(7601),r(3650),r(1058);var ke=r(1509);const Ie={computed:{months:function(){return Array.from({length:12},(function(e,t){var r=t+1;return r<10?"0".concat(r):"".concat(r)}))},years:function(){var e=(new Date).getFullYear(),t=e+20;return Array.from({length:t-e+1},(function(t,r){return e+r}))}},setup:function(){var e=(0,ke.t)(),t=(0,I.iH)(e.selectedCreditCardIndex),r=(0,I.iH)(e.selectedPaymentMethodIndex),d=(0,I.iH)(e.selectedCreditCardCircle),a=(0,I.iH)(e.selectedPaymentMethodCircle),s=(0,n.Fl)((function(){return e.creditCards.slice(0,3)})),l=(0,n.Fl)((function(){return e.selectedCreditCard})),i=(0,I.iH)(!0),c=(0,I.iH)(!1),o=(0,I.iH)({number:"",name:"",month:"",year:"",securityCode:"",company:""}),u=function(r){void 0!==s.value[r]?(t.value=r,console.log("Selected credit card to set:",s.value[r]),d.value=!0,e.setSelectedCreditCard(s.value[r]),e.setSelectedCreditCardIndex(r),e.setSelectedCreditCardCircle(!0)):console.error("Invalid index:",r,"Credit Cards:",s.value)},v=function(t){r.value=t,a.value=!0,e.setSelectedPaymentMethodIndex(t),e.setSelectedPaymentMethodCircle(!0)},p=function(){c.value=!0},C=function(){c.value=!1},m=function(r){e.creditCards[r]===e.selectedCreditCard?(e.setSelectedCreditCard(null),e.setSelectedCreditCardIndex(null),e.setSelectedCreditCardCircle(!1)):e.selectedCreditCard&&null!==t.value&&r<t.value&&(t.value=t.value-1,e.setSelectedCreditCardIndex(t.value)),e.removeCreditCard(r)},f=function(){3===e.creditCards.length&&e.removeCreditCard(e.creditCards.length-1);var r=o.value.number,n=o.value.name,a=o.value.month,s=o.value.year,i=o.value.securityCode;if(/^\d+$/.test(r)){var u=r[0],v=r.substr(0,2),p=null,C=null;switch(u){case"4":p=16,C="Visa";break;case"5":p=16,C="MasterCard";break;default:switch(v){case"34":case"37":p=15,C="American Express";break;case"35":p=16,C="JCB";break;case"36":p=14,C="Diners Club";break;default:return void alert("無効なカード番号です")}}if(r.length===p)if(/^[A-Z\s]+$/.test(n))if(/^\d{3,4}$/.test(i))if(a&&s){var m=(new Date).getFullYear(),f=(new Date).getMonth()+1;if(parseInt(s)<m||parseInt(s)===m&&parseInt(a)<f)alert("有効期限が過去の日付です");else{var y={number:r,name:n,month:a,year:s,securityCode:i,company:C};e.addCreditCard(y),e.setSelectedCreditCard(null),l.value=null,t.value=null,d.value=!1,c.value=!1,o.value.number="",o.value.name="",o.value.month="",o.value.year="",o.value.securityCode="",o.value.company=""}}else alert("有効期限を選択してください");else alert("セキュリティコードは3桁または4桁の数字である必要があります");else alert("カード名義は半角大文字のローマ字のみで入力してください");else alert("カード番号は"+p+"桁である必要があります")}else alert("カード番号は半角数字のみ入力してください")};return{paymentStore:e,selectedCreditCardIndex:t,selectedPaymentMethodIndex:r,selectedCreditCardCircle:d,selectedCreditCard:l,selectedPaymentMethodCircle:a,displayedCreditCards:s,toggleCreditCardCircle:u,togglePaymentMethodCircle:v,openCreditAddModal:p,closeCreditAddModal:C,deleteCreditCard:m,addCreditCard:f,isCreditModalVisible:i,isCreditAddModalVisible:c,newCreditCard:o}}},Se=(0,G.Z)(Ie,[["render",Ae]]),De=Se;var Pe=r(2201);const Ve={components:{AddressModal:Q,CreditModal:De},setup:function(){(0,n.bv)((function(){window.scrollTo(0,0)}));var e=(0,ke.t)(),t=(0,Pe.tv)(),r=(0,I.iH)(e.selectedAddressIndex),d=(0,I.iH)(e.selectedPaymentMethodIndex),a=(0,I.iH)(e.selectedAddressCircle),s=(0,I.iH)(e.selectedPaymentMethodCircle),l=(0,n.Fl)((function(){return e.addresses.slice(0,3)})),i=(0,n.Fl)((function(){return e.selectedAddress})),c=(0,n.Fl)((function(){return e.selectedCreditCard})),o=e.selectedPaymentMethod,u=(0,I.iH)(""),v=(0,n.Fl)((function(){return[{name:"クレジットカード",description:c.value?"".concat(c.value.company,"  末尾:").concat(c.value.number.slice(-4),"  ").concat(c.value.name,"  ").concat(c.value.month,"/").concat(c.value.year):"カード情報が選択されていません",hasModalButton:!0},{name:"代金引換え",description:"国内配送のみ。代引手数料がかかります。",hasModalButton:!1},{name:"コンビニ・ATM・ネットバンキング・電子マネー支払い",description:"商品の発送は代金のお支払い後になるため、お届け予定日はお支払い確定後にご案内いたします。",hasModalButton:!1}]})),p=function(t){void 0!==l.value[t]?(r.value=t,console.log("Selected address to set:",l.value[t]),a.value=!0,e.setSelectedAddress(l.value[t]),e.setSelectedAddressIndex(t),e.setSelectedAddressCircle(!0)):console.error("Invalid index:",t,"Addresses:",l.value)},C=function(t){d.value=t,s.value=!0;var r=v.value[t];e.setSelectedPaymentMethod(r),e.setSelectedPaymentMethodIndex(t),e.setSelectedPaymentMethodCircle(!0)},m=function(){e.setSelectedAddress(null),e.setSelectedAddressIndex(null),e.setSelectedAddressCircle(!1),a.value=!1,b.value=!0},f=function(){_.value=!0,e.setSelectedPaymentMethod(null),e.setSelectedPaymentMethodIndex(null),e.setSelectedPaymentMethodCircle(!1),d.value=null,s.value=!1},y=function(){b.value=!1,_.value=!1},h=function(t){var n=e.addresses[t];i.value&&n.address===i.value.address?(e.setSelectedAddress(null),r.value=null,e.setSelectedAddressCircle(!1),a.value=!1):r.value>t&&(r.value--,e.setSelectedAddressIndex(r.value)),e.removeAddress(t)},g=function(t){var r={name:"New Option",isActive:!1,address:"".concat(t.postCode," ").concat(t.selectedPrefecture).concat(t.city).concat(t.houseNumber," ").concat(t.buildingName)};3===e.addresses.length&&e.removeAddress(e.addresses.length-1),e.addAddress(r),b.value=!1},b=(0,I.iH)(!1),_=(0,I.iH)(!1),x=function(){null===r.value?u.value="住所情報を選択してください。":null===d.value?u.value="支払い情報を選択してください。":"クレジットカード"===v.value[d.value].name&&"カード情報が選択されていません"===v.value[d.value].description?u.value="クレジットカード情報を選択してください。":(u.value="",t.push("/cart-check"))};return{paymentStore:e,selectedAddressIndex:r,selectedPaymentMethodIndex:d,selectedAddressCircle:a,selectedAddress:i,selectedPaymentMethodCircle:s,displayedAddresses:l,toggleAddressCircle:p,togglePaymentMethodCircle:C,openAddressModal:m,openCreditModal:f,closeModal:y,deleteAddress:h,submitForm:g,isAddressModalVisible:b,isCreditModalVisible:_,paymentMethods:v,selectedPaymentMethod:o,goToCartCheck:x,errorMessage:u}},methods:{returnToCart:function(){this.$router.push("/cart-list")}}},He=(0,G.Z)(Ve,[["render",k],["__scopeId","data-v-5ba375cf"]]),Ne=He}}]);
//# sourceMappingURL=CartPayment.b07e76f2.js.map